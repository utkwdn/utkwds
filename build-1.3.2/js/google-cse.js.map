{"version":3,"file":"js/google-cse.js","mappings":"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","sources":["webpack://utkwds/./src/js/google-cse.js"],"sourcesContent":["document.addEventListener( 'DOMContentLoaded', () => {\n\tconst query = UTK_CSE.query;\n\tif ( ! query ) return; // No search executed yet\n\n\tconst resultsContainer = document.getElementById( 'utk-search-results' );\n\tconst paginationContainer = document.getElementById(\n\t\t'utk-search-pagination'\n\t);\n\n\t/**\n\t * Fetch results from Google CSE API.\n\t */\n\tfunction fetchResults( startIndex = 1 ) {\n\t\tconst url = `${ UTK_CSE.endpoint }?key=${ UTK_CSE.apiKey }&cx=${\n\t\t\tUTK_CSE.cx\n\t\t}&q=${ encodeURIComponent( query ) }&start=${ startIndex }`;\n\n\t\tresultsContainer.innerHTML = `<p>Loadingâ€¦</p>`;\n\t\tpaginationContainer.innerHTML = '';\n\n\t\tfetch( url )\n\t\t\t.then( ( res ) => res.json() )\n\t\t\t.then( renderResults )\n\t\t\t.catch( ( err ) => {\n\t\t\t\tresultsContainer.innerHTML = `<p>Error loading results.</p>`;\n\t\t\t\tconsole.error( err );\n\t\t\t} );\n\t}\n\n\t/**\n\t * Render search results and pagination.\n\t */\n\tfunction renderResults( data ) {\n\t\tif ( ! data.items || data.items.length === 0 ) {\n\t\t\tresultsContainer.innerHTML = `<p>No results found.</p>`;\n\t\t\treturn;\n\t\t}\n\n\t\tlet html = '';\n\n\t\tdata.items.forEach( ( item ) => {\n\t\t\tconst title = item.title;\n\t\t\tconst snippet = item.snippet || '';\n\t\t\tconst url = item.link;\n\t\t\tconst linkText = item.displayLink;\n\n\t\t\t// Extract thumbnail\n\t\t\tlet image = null;\n\n\t\t\tif ( item.pagemap?.cse_thumbnail?.[ 0 ]?.src ) {\n\t\t\t\timage = item.pagemap.cse_thumbnail[ 0 ].src;\n\t\t\t}\n\n\t\t\thtml += `\n\t\t\t\t<div class=\"utk-search-item\">\n\t\t\t\t\t<div class=\"utk-search-content\">\n\t\t\t\t\t\t<h5><a href=\"${ url }\">${ title }</a></h5>\n\t\t\t\t\t\t<p>${ snippet }</p>\n\t\t\t\t\t\t<a href=\"${ url }\">${ linkText }</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t} );\n\n\t\tresultsContainer.innerHTML = html;\n\n\t\trenderPagination( data );\n\t}\n\n\t/**\n\t * Render pagination links (Next, Previous)\n\t */\n\tfunction renderPagination( data ) {\n\t\tlet html = '';\n\n\t\tif ( data.queries?.previousPage ) {\n\t\t\tconst prevStart = data.queries.previousPage[ 0 ].startIndex;\n\t\t\thtml += `<button data-start=\"${ prevStart }\" class=\"page-btn\">Previous</button>`;\n\t\t}\n\n\t\tif ( data.queries?.nextPage ) {\n\t\t\tconst nextStart = data.queries.nextPage[ 0 ].startIndex;\n\t\t\thtml += `<button data-start=\"${ nextStart }\" class=\"page-btn\">Next</button>`;\n\t\t}\n\n\t\tpaginationContainer.innerHTML = html;\n\n\t\t// Bind pagination events\n\t\tdocument.querySelectorAll( '.page-btn' ).forEach( ( btn ) => {\n\t\t\tbtn.addEventListener( 'click', ( e ) => {\n\t\t\t\tconst start = e.target.getAttribute( 'data-start' );\n\t\t\t\tfetchResults( start );\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// Trigger first load\n\tfetchResults();\n} );\n"],"names":["document","addEventListener","query","UTK_CSE","resultsContainer","getElementById","paginationContainer","fetchResults","startIndex","url","endpoint","apiKey","cx","encodeURIComponent","innerHTML","fetch","then","res","json","renderResults","catch","err","console","error","data","items","length","html","forEach","item","title","snippet","link","linkText","displayLink","image","pagemap","cse_thumbnail","src","renderPagination","queries","previousPage","prevStart","nextPage","nextStart","querySelectorAll","btn","e","start","target","getAttribute"],"sourceRoot":""}
{"version":3,"file":"js/offcanvas.js","mappings":"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","sources":["webpack://utkwds/./src/js/offcanvas.js"],"sourcesContent":["const transitionDuration = 300;\n\nlet activeSidebar = null;\nlet lastTrigger = null;\nlet autoClosed = false;\n\nfunction openSidebar( sidebar, trigger ) {\n\tactiveSidebar = sidebar;\n\tlastTrigger = trigger;\n\tautoClosed = false;\n\n\tconst overlay = document.createElement( 'div' );\n\toverlay.className = 'offcanvas-overlay';\n\tdocument.body.appendChild( overlay );\n\n\toverlay.addEventListener( 'click', closeSidebar );\n\twindow.addEventListener( 'resize', handleResize );\n\n\tsidebar.classList.add( 'showing' );\n\tdocument.body.classList.add( 'no-scroll' );\n\n\t// so we correctly get the transition on the newly created `offcanvas-overlay` element\n\tsetTimeout( () => {\n\t\toverlay.classList.add( 'show' );\n\t}, 1 );\n\n\tsetTimeout( () => {\n\t\tsidebar.classList.remove( 'showing' );\n\t\tsidebar.classList.add( 'show' );\n\t}, transitionDuration );\n\n\ttrigger.setAttribute( 'aria-expanded', 'true' );\n\tsidebar.setAttribute( 'aria-hidden', 'false' );\n\n\tsidebar.focus();\n}\n\nfunction closeSidebar() {\n\tif ( ! activeSidebar ) return;\n\n\tconst overlay = document.querySelector( '.offcanvas-overlay' );\n\n\toverlay.removeEventListener( 'click', closeSidebar );\n\twindow.removeEventListener( 'resize', handleResize );\n\n\tactiveSidebar.classList.add( 'hiding' );\n\toverlay.classList.remove( 'show' );\n\n\tlastTrigger.setAttribute( 'aria-expanded', 'false' );\n\tactiveSidebar.setAttribute( 'aria-hidden', 'true' );\n\n\tlastTrigger.focus();\n\n\tsetTimeout( () => {\n\t\tdocument.body.classList.remove( 'no-scroll' );\n\t\tactiveSidebar.classList.remove( 'hiding' );\n\t\tactiveSidebar.classList.remove( 'show' );\n\n\t\tdocument.body.removeChild( overlay );\n\n\t\tactiveSidebar = null;\n\t\tlastTrigger = null;\n\t}, transitionDuration );\n}\n\nfunction handleResize() {\n\tif ( ! activeSidebar ) return;\n\n\tconst breakpoint = activeSidebar.dataset.maxBreakpoint || 600;\n\n\tif ( window.innerWidth >= breakpoint && ! autoClosed ) {\n\t\tautoClosed = true;\n\t\tcloseSidebar();\n\t}\n}\n\ndocument\n\t.querySelectorAll( '[data-toggle=\"offcanvas\"]' )\n\t.forEach( ( trigger ) => {\n\t\tconst targetId = trigger.getAttribute( 'data-target' );\n\t\tconst sidebar = document.querySelector( targetId );\n\n\t\ttrigger.setAttribute( 'aria-expanded', 'false' );\n\n\t\ttrigger.addEventListener( 'click', () =>\n\t\t\topenSidebar( sidebar, trigger )\n\t\t);\n\t} );\n\ndocument.querySelectorAll( '[data-dismiss=\"offcanvas\"]' ).forEach( ( btn ) => {\n\tbtn.addEventListener( 'click', closeSidebar );\n} );\n\ndocument.addEventListener( 'keydown', ( e ) => {\n\tif ( e.key === 'Escape' || e.key === 'Esc' ) {\n\t\tif ( activeSidebar ) closeSidebar();\n\t}\n} );\n\ndocument.addEventListener( 'keydown', ( e ) => {\n\tif ( ! activeSidebar || e.key !== 'Tab' ) return;\n\n\tconst focusableEls = activeSidebar.querySelectorAll(\n\t\t'a, button, input, textarea, select, [tabindex]:not([tabindex=\"-1\"])'\n\t);\n\tif ( ! focusableEls.length ) return;\n\n\tconst firstEl = focusableEls[ 0 ];\n\tconst lastEl = focusableEls[ focusableEls.length - 1 ];\n\n\tif ( e.shiftKey && document.activeElement === firstEl ) {\n\t\te.preventDefault();\n\t\tlastEl.focus();\n\t} else if ( ! e.shiftKey && document.activeElement === lastEl ) {\n\t\te.preventDefault();\n\t\tfirstEl.focus();\n\t}\n} );\n"],"names":["transitionDuration","activeSidebar","lastTrigger","autoClosed","openSidebar","sidebar","trigger","overlay","document","createElement","className","body","appendChild","addEventListener","closeSidebar","window","handleResize","classList","add","setTimeout","remove","setAttribute","focus","querySelector","removeEventListener","removeChild","breakpoint","dataset","maxBreakpoint","innerWidth","querySelectorAll","forEach","targetId","getAttribute","btn","e","key","focusableEls","length","firstEl","lastEl","shiftKey","activeElement","preventDefault"],"sourceRoot":""}
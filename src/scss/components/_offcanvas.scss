// stylelint-disable function-disallowed-list

$prefix: utk-site-header-;

$menu-breakpoint: 1170;

$offcanvas-padding-y: 1.25rem;
$offcanvas-padding-x: 1.25rem;
$offcanvas-horizontal-width: 400px !default;
$offcanvas-vertical-height: 100vh !default;
$offcanvas-transition-duration: 0.3s !default;
$offcanvas-border-color: transparent;
$offcanvas-border-width: 0 !default;
$offcanvas-title-line-height: 1.1 !default;
$offcanvas-bg-color: #fff;
$offcanvas-color: var(--wp--preset--color--smokey) !default;
$offcanvas-box-shadow: -4px 4px 24px rgba(0, 0, 0, 0.05) !default;
$offcanvas-backdrop-bg: rgba(0, 0, 0) !default;
$offcanvas-backdrop-opacity: 0.8 !default;

%offcanvas-css-vars {
  // scss-docs-start offcanvas-css-vars
  --#{$prefix}offcanvas-zindex: #{$zindex-offcanvas};
  --#{$prefix}offcanvas-width: #{$offcanvas-horizontal-width};
  --#{$prefix}offcanvas-height: #{$offcanvas-vertical-height};
  --#{$prefix}offcanvas-padding-x: #{$offcanvas-padding-x};
  --#{$prefix}offcanvas-padding-y: #{$offcanvas-padding-y};
  --#{$prefix}offcanvas-color: #{$offcanvas-color};
  --#{$prefix}offcanvas-bg: #{$offcanvas-bg-color};
  --#{$prefix}offcanvas-border-width: #{$offcanvas-border-width};
  --#{$prefix}offcanvas-border-color: #{$offcanvas-border-color};
  --#{$prefix}offcanvas-box-shadow: #{$offcanvas-box-shadow};
  --#{$prefix}offcanvas-transition: #{transform $offcanvas-transition-duration ease-in-out};
  --#{$prefix}offcanvas-title-line-height: #{$offcanvas-title-line-height};
  // scss-docs-end offcanvas-css-vars
}

.offcanvas {
	@extend %offcanvas-css-vars;

    position: fixed;
	bottom: 0;
	z-index: var(--#{$prefix}offcanvas-zindex);
	display: flex;
	flex-direction: column;
	max-width: 100%;
	color: var(--#{$prefix}offcanvas-color);
	visibility: hidden;
	background-color: var(--#{$prefix}offcanvas-bg);
	background-clip: padding-box;
	outline: 0;
	transition: var(--#{$prefix}offcanvas-transition);

	&.offcanvas-start {
		top: var(--wp-admin--admin-bar--height, 0);
		left: 0;
		width: var(--#{$prefix}offcanvas-width);
		border-right: var(--#{$prefix}offcanvas-border-width) solid var(--#{$prefix}offcanvas-border-color);
		transform: translateX(-100%);
	}

	&.offcanvas-end {
		top: var(--wp-admin--admin-bar--height, 0);
		right: 0;
		width: var(--#{$prefix}offcanvas-width);
		border-left: var(--#{$prefix}offcanvas-border-width) solid var(--#{$prefix}offcanvas-border-color);
		transform: translateX(100%);
	}

	&.offcanvas-top {
		top: var(--wp-admin--admin-bar--height, 0);
		right: 0;
		left: 0;
		height: var(--#{$prefix}offcanvas-height);
		max-height: 100%;
		border-bottom: var(--#{$prefix}offcanvas-border-width) solid var(--#{$prefix}offcanvas-border-color);
		transform: translateY(-100%);
	}

	&.offcanvas-bottom {
		right: 0;
		left: 0;
		height: var(--#{$prefix}offcanvas-height);
		max-height: 100%;
		border-top: var(--#{$prefix}offcanvas-border-width) solid var(--#{$prefix}offcanvas-border-color);
		transform: translateY(100%);
	}

	&.showing,
	&.show:not(.hiding) {
		transform: none;
	}

	&.showing,
	&.hiding,
	&.show {
		visibility: visible;
	}
}

.offcanvas-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--#{$prefix}offcanvas-padding-y) var(--#{$prefix}offcanvas-padding-x);

  .btn-close {
    padding: calc(var(--#{$prefix}offcanvas-padding-y) * .5) calc(var(--#{$prefix}offcanvas-padding-x) * .5);
    margin-top: calc(-.5 * var(--#{$prefix}offcanvas-padding-y));
    margin-right: calc(-.5 * var(--#{$prefix}offcanvas-padding-x));
    margin-bottom: calc(-.5 * var(--#{$prefix}offcanvas-padding-y));
  }
}

.offcanvas-title {
  margin-bottom: 0;
  line-height: var(--#{$prefix}offcanvas-title-line-height);
}

.offcanvas-body {
  flex-grow: 1;
  padding: var(--#{$prefix}offcanvas-padding-y) var(--#{$prefix}offcanvas-padding-x);
  overflow-y: auto;
}

.no-scroll {
	overflow: hidden;
	padding-right: 0;
}

.offcanvas-overlay {
	position: fixed;
  	top: 0;
  	left: 0;
  	z-index: 1040;
  	width: 100vw;
  	height: 100vh;
  	background-color: #000;
	transition: opacity 150ms linear;

	&:not(.show) {
		opacity: 0;
	}

  	&.show {
		opacity: 0.8;
	}
}

.offcanvas-body {
  flex-grow: 1;
  padding: var(--#{$prefix}offcanvas-padding-y) var(--#{$prefix}offcanvas-padding-x);
  overflow-y: auto;
}

.btn-close {
  --utk-site-header-btn-close-color: #000;
  --utk-site-header-btn-close-bg: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3E%3Cpath d=%27M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414z%27/%3E%3C/svg%3E");
  --utk-site-header-btn-close-opacity: 0.5;
  --utk-site-header-btn-close-hover-opacity: 0.75;
  --utk-site-header-btn-close-focus-shadow: 0 0 0 0.25rem rgba(13,110,253,.25);
  --utk-site-header-btn-close-focus-opacity: 1;
  --utk-site-header-btn-close-disabled-opacity: 0.25;
  --utk-site-header-btn-close-white-filter: invert(1) grayscale(100%) brightness(200%);
  background: transparent var(--utk-site-header-btn-close-bg) center/1em auto no-repeat;
  border: 0;
  border-radius: .375rem;
  box-sizing: content-box;
  height: 1em;
  opacity: var(--utk-site-header-btn-close-opacity);
  padding: .25em;
  width: 1em
}

.btn-close {
	&:hover {
		opacity: var(--utk-site-header-btn-close-hover-opacity);
  		color: var(--utk-site-header-btn-close-color);
  		text-decoration: none;
	}
	&:focus {
  		box-shadow: var(--utk-site-header-btn-close-focus-shadow);
  		opacity: var(--utk-site-header-btn-close-focus-opacity);
  		outline: 0
	}
	&.disabled, 
	&:disabled {
  		opacity: var(--utk-site-header-btn-close-disabled-opacity);
  		pointer-events: none;
  		-webkit-user-select: none;
  		-moz-user-select: none;
  		user-select: none
	}
}